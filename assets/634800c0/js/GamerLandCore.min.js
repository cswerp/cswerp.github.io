"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CasePage=function(e){var o=($.extend(!0,{loadMoreUrl:"",endOfLottery:""},e),{carousel:".owl-carousel",gallery:".popup-gallery",promoCode:"#promo-code-input",promoCodePayModal:"#promo-input",promoCodeShowButton:".promo-text",promoBlockPayForm:".promo-form",promoCheckTrigger:"#promo-check-trigger"});$(o.carousel).owlCarousel({loop:!1,margin:7,nav:!0,items:5}),$(o.gallery).magnificPopup({delegate:"a",type:"image",tLoading:LandingCore.t("Загрузка изображения")+" #%curr%...",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]}}),$("body").on("click",'[data-toggle="pay-modal"], [data-toggle="pay-modal-promo"]',function(){var e=$(this).data("item-id"),t=$(this).data("item-price");$(o.promoCheckTrigger).attr("data-item-id",e),$(o.promoCheckTrigger).attr("data-item-price",t)}).on("click","#buy",function(){var e=$(o.promoCode).val();$(o.promoCodePayModal).val(e),void 0!==e&&""!==e&&$(o.promoBlockPayForm).hasClass("hidden")&&($(o.promoCodeShowButton).click(),setTimeout(function(){$(o.promoCheckTrigger).click()},200))})},GamerLandCommon=function(e){$.extend(!0,{},e);$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()}),$(".cancel").click(function(){$(".popup-wrap").fadeOut(400)}),$(".menu3").hover(function(){$(".drop3").fadeIn(200)}),$(".menu2").hover(function(){$(".drop1").fadeOut(200),$(".drop3").fadeOut(200)}),$(".menu3").hover(function(){$(".drop1").fadeOut(200),$(".drop2").fadeOut(200)}),$(".menu1").hover(function(){$(".drop2").fadeOut(200),$(".drop3").fadeOut(200)}),$(".main-nav").hover(function(){},function(){$(".drop-menu").fadeOut(200)}),$(document).ready(function(){var e="250px";$(".filter").click(function(){0==$(this).attr("num")?($(".span-wrap").animate({width:e},300),$(".sp").text("<"),$(this).attr("num","1")):($(".span-wrap").animate({width:"0px"},300),$(".sp").text(">"),$(this).attr("num","0"))})}),$(document).ready(function(){var e="80px";$(".plus").hover(function(){0==$(this).attr("num")&&($(".bal-wrap").animate({width:e,marginLeft:"-=65px"},300),$(this).attr("num","1"))}),$(".plus2").hover(function(){0==$(this).attr("num")&&($(".bal-wrap2").animate({width:"60px",marginLeft:"-=45px"},300),$(this).attr("num","1"))}),$(".bal-wrap, .bal-wrap2").hover(function(){},function(){$(this).animate({width:"0",marginLeft:"0px"},300),$(".plus, .plus2").attr("num","0")}),$('[data-toggle="pay-modal"]').on("click",function(e){var o=$(this).data("item-id");$(".used-promo").attr("data-item-id",o)}),$('[data-toggle="pay-modal-promo"]').on("click",function(e){e.preventDefault()})}),$(".main-clock").on("click",function(e){e.preventDefault()}),$(".to-scroll").click(function(e){e.preventDefault();var o=$(this).attr("href"),t=$(o).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:t-90},800),!1}),fitty("#game-name-text",{maxSize:40})},GiftPromoPage=function(e){e=$.extend(!0,{buyAction:"",openUrl:"",promoCodeCheckUrl:"",promotionalCodeType:"",promotionalCodeSubType:"",promoCodeSubTypes:[]},e);var o={openCaseDescr:".open-case-descr",buyWithPromoCode:"#buy-with-promo-code",valuePromoCode:"#promo-code-hash",promoCodeBlock:".promo-code-block",openCaseButton:"#open-case-button"},t="buy",n={buyAction:!1,dataPromoCodeId:null,caseInfo:null};$("body").on("click",o.buyWithPromoCode,function(a){if(a.preventDefault(),""!=e.promoCodeCheckUrl&&""!=$(o.valuePromoCode).val()){var i=function(){if(n.buyAction)return{v:!1};n.buyAction=!0;var a=$.Deferred();$.ajax({url:e.promoCodeCheckUrl,method:"POST",dataType:"json",data:{_csrf:LandingCore.getCsrfToken(),hash:$(o.valuePromoCode).val(),promotionalCodeType:e.promotionalCodeType,promotionalCodeSubType:e.promotionalCodeSubType},success:function(e){"ok"==e.status?(n.dataPromoCodeId=e.promoCodeId,n.caseInfo=e.caseInfo,a.resolve(!0)):(a.resolve(!1),n.buyAction=!1,new PNotify({title:LandingCore.t("Ошибка"),text:e.msg,icon:"",type:"error",delay:8e3}))},error:function(e,o,t){n.buyAction=!1,a.resolve(!1),new PNotify({title:"Error",text:"Something went wrong",icon:"",type:"success",delay:8e3})}}),a.then(function(o){if(!o)return!1;var a="RUB",i={caseSlug:n.caseInfo.slug,_csrf:LandingCore.getCsrfToken(),promoCodeId:n.dataPromoCodeId},s=e.buyAction;i.buyType=t,i.payType=a,$.ajax({url:s,dataType:"json",method:"POST",data:i,success:function(o){if("ok"!=o.status)return new PNotify({title:LandingCore.t("Сообщение"),text:o.msg,icon:"",type:"success",delay:8e3}),n.buyAction=!1,!1;n.buyAction=!1;var t=e.openUrl.replace(/%s/,o.id);ModalFallenGame.init({name:o.name,image:o.image,url:t,costItem:o.costItem,type:ModalFallenGame.typeItem}),ModalFallenGame.show()},error:function(e,o,t){n.buyAction=!1,new PNotify({title:"Error",text:"Something went wrong",icon:"",type:"success",delay:8e3})}})})}();if("object"===("undefined"==typeof i?"undefined":_typeof(i)))return i.v}else new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Для получения бесплатного товара или кейса необходим промокод"),icon:"",type:"error",delay:8e3})})},IndexPage=function(e){var o=$.extend(!0,{clockTime:"",endOfLottery:"",loadMoreUrl:"",countPages:""},e),t={clockLottery:".clock",topGames:"#top-games",topCase:".top-case",buyButton:".buy"};""==o.endOfLottery&&(o.endOfLottery=3600),$(t.clockLottery).FlipClock(Math.abs(o.endOfLottery),{countdown:!0});var n=$("body");n.on("click",t.topCase,function(){var e=$(this).data("url");window.location.href=e})},LandingsFaqPage=function(e){var o=($.extend(!0,{},e),{gallery:".popup-gallery"});$(o.gallery).magnificPopup({delegate:"a",type:"image",tLoading:LandingCore.t("Загрузка изображения")+" #%curr%...",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]}});var t=1,n=1,a=$("body");a.on("click",".nxt",function(){t=parseInt(t),1==n&&(n=0,$(".sldot").removeClass("active-dot"),$(".prv").css("filter","grayscale(0)"),$(".slide").removeClass("slide-left"),$(".slide").removeClass("slide-right"),$(".slide").removeClass("slide-newleft"),$(".slide").removeClass("slide-newright"),$(".slide"+t).addClass("slide-left"),$(".slide"+t).css("position","absolute"),5==t?(t=0,$('.sldot[num="1"]').addClass("active-dot"),$(".slide"+(t+1)).css("display","block"),$(".slide"+(t+1)).css("position","relative"),$(".slide"+(t+1)).addClass("slide-newleft"),setTimeout(function(){$(".slide5").css("display","none"),t+=1,n=1},1e3)):($('.sldot[num="'+(t+1)+'"]').addClass("active-dot"),$(".slide"+(t+1)).css("display","block"),$(".slide"+(t+1)).css("position","relative"),$(".slide"+(t+1)).addClass("slide-newleft"),setTimeout(function(){$(".slide"+t).css("display","none"),t+=1,n=1},1e3)))}).on("click",".prv",function(){1==n&&(n=0,$(".sldot").removeClass("active-dot"),$(".slide").removeClass("slide-left"),$(".slide").removeClass("slide-right"),$(".slide").removeClass("slide-newleft"),$(".slide").removeClass("slide-newright"),$(".slide"+t).addClass("slide-right"),$(".slide"+t).css("position","absolute"),1==t?($('.sldot[num="5"]').addClass("active-dot"),$(".slide5").css("display","block"),$(".slide5").css("position","relative"),$(".slide5").addClass("slide-newright"),setTimeout(function(){$(".slide1").css("display","none"),t=5,n=1},1e3)):($('.sldot[num="'+(t-1)+'"]').addClass("active-dot"),$(".slide"+(t-1)).css("display","block"),$(".slide"+(t-1)).css("position","relative"),$(".slide"+(t-1)).addClass("slide-newright"),setTimeout(function(){$(".slide"+t).css("display","none"),t-=1,n=1},1e3)))}).on("click",".sldot",function(){if(1==n){n=0,$(".sldot").removeClass("active-dot"),$(this).addClass("active-dot");var e=$(this).attr("num");e>t&&($(".prv").css("filter","grayscale(0)"),$(".slide").removeClass("slide-left"),$(".slide").removeClass("slide-right"),$(".slide").removeClass("slide-newleft"),$(".slide").removeClass("slide-newright"),$(".slide"+t).addClass("slide-left"),$(".slide"+t).css("position","absolute"),$(".slide"+e).css("display","block"),$(".slide"+e).css("position","relative"),$(".slide"+e).addClass("slide-newleft"),setTimeout(function(){$(".slide"+t).css("display","none"),t=e,n=1},1e3)),e<t&&($(".slide").removeClass("slide-left"),$(".slide").removeClass("slide-right"),$(".slide").removeClass("slide-newleft"),$(".slide").removeClass("slide-newright"),$(".slide"+t).addClass("slide-right"),$(".slide"+t).css("position","absolute"),$(".slide"+e).css("display","block"),$(".slide"+e).css("position","relative"),$(".slide"+e).addClass("slide-newright"),setTimeout(function(){$(".slide"+t).css("display","none"),t=e,n=1},1e3)),e==t&&(n=1)}})},LotteryPage=function(e){var o=$.extend(!0,{loadMoreUrl:"",endOfLottery:"",winnersPageCount:""},e),t={moreButton:"#more-button",moreWins:"#more-wins",buttonTakePart:"#take-part-button",formTakePart:"#take-part",clockLottery:".clock",mainLotteryClock:".lottery-clock"};$(t.clockLottery).FlipClock(Math.abs(o.endOfLottery),{countdown:!0}),$(t.mainLotteryClock).FlipClock(Math.abs(o.endOfLottery),{countdown:!0});var n=$("body");n.on("click",t.moreButton,function(e){var n=$("input[name=page]");return void 0!==n&&void $.ajax({url:o.loadMoreUrl,dataType:"json",method:"POST",data:{_csrf:LandingCore.getCsrfToken(),page:n.val()},async:!1,success:function(e){if("ok"!=e.status)return new PNotify({title:LandingCore.t("Сообщение"),text:e.msg,icon:"",type:"success",delay:8e3}),!1;$(t.moreWins).append(e.items);var a=n.val();a=parseInt(a),a++,parseInt(o.winnersPageCount)===parseInt(a)&&$(t.moreButton).hide(),n.val(a)},error:function(e,o,t){new PNotify({title:LandingCore.t("Ошибка"),text:LandingCore.t("Что-то пошло не так"),icon:"",type:"success",delay:8e3})}})}).on("click",t.buttonTakePart,function(e){e.preventDefault(),$(t.formTakePart).submit()})},PromoBuy=function(e){var o=$.extend(!0,{selectors:{promoInput:"#paymodal-form #promo-input"},promocodeSettings:{promotionalCodeType:"",promotionalCodeSubType:"",promoCodeSubTypes:{}}},e),t=function(){},n=0,a={_object:null,_props:{casePrice:""},_nativeMethods:{onSubmit:function(){},setParams:function(e){return!1},show:function(){},setSum:function(e){}},_methods:{onSubmit:function(e){d()&&!p()?(a._methods.block(),m(e)):a._nativeMethods.onSubmit.call(a._object,e)},setParams:function(e,o){if("undefined"!=typeof o){if("undefined"==typeof o.status)a._nativeMethods.setParams.call(a._object,e);else if("ok"===o.status){if(a._object.casePrice!==o.discountPrice){a._object.casePrice=o.discountPrice,n=o.casePrice;var t=$("#promo-old-price");t.text(n),t.parent().removeClass("hidden")}a._object.promocode=$("#promo-input").val(),u(!0),$("#payform-error-msg").addClass("hidden")}}else u(!1);a._methods.unblock()},setSum:function(e){$("#promo-old-price").text(n),a._nativeMethods.setSum.call(a._object,e)},block:function(){var e=i._object.payModal+" .modal-content";LandingCore.blockUI().block(e)},unblock:function(){var e=i._object.payModal+" .modal-content";LandingCore.blockUI().unblock(e)}}},i={_object:null},s={_object:null,_nativeProps:{},_props:{promocodeSettings:o.promocodeSettings}},r=function(){return $(o.selectors.promoInput)},l=function(){return r().val()},d=function(){return l().length>0},c=!1,u=function(e){c=e,e||(a._object.promocode="")},p=function(){return c},m=function(e){e.preventDefault(),a._nativeMethods.setParams=a._object.setParams,a._object.setParams=a._methods.setParams};return t.prototype.visitPayModal=function(e){a._object=e,$("body").on("click","#promo-check-trigger",function(e){m(e)}),a._nativeMethods.show=e.show,a._object.show=a._nativeMethods.show,a._nativeMethods.setSum=e.setSum,a._object.setSum=a._methods.setSum,a._object.unblocl=a._methods.unblock,$("body").on("click",'[data-toggle="pay-modal"]',function(e){n=$(e.target).data("item-price"),$(i._object.payModal).find("form").append('<input id="dpc" type="hidden" name="dpc" value="1">')}),$("body").on("keyup","#promo-input",function(e){0==d()&&(a._object.casePrice=n,$(a._object.selectors.sum).text(n*$(a._object.selectors.quantity).val()),$("#promo-old-price").parent().addClass("hidden"),u(!1))}),$("body").on("click",".promo-text",function(e){$(".promo-form").toggleClass("hidden")})},t.prototype.visitSelectors=function(e){i._object=e},t.prototype.visitPageOptions=function(e){s._object=e,s._nativeProps.promocodeSettings=e.promocodeSettings,e.promocodeSettings=s._props.promocodeSettings},new t};